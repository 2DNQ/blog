function responsiveParams(){var t=640,i=1024,s=$(window).width(),e={small:{size:10,lineHeight:24},medium:{size:11,lineHeight:28},large:{size:12,lineHeight:34}};return t>=s?e.small:s>t&&i>=s?e.medium:e.large}!function(){function t(t,e){this.el=t,this.$el=$(t),this.settings=$.extend({},s,e||{}),this.$el.data("readmore-text")&&(this.settings.linkText=this.$el.data("readmore-text")),this.$el.data("readmore-text-open")&&(this.settings.linkTextOpen=this.$el.data("readmore-text-open")),this._defaults=s,this._name=i,this.init()}var i="readmore",s={lineHeight:24,size:12,addClass:"readmore",wrapClass:"readmore-wrap",wrapClassOpen:"readmore-wrap--open",buttonClass:"slider",linkClassHidden:"link--hidden",addLinkClass:null,linkClass:"more link",linkClassOpen:"link--hidden",linkText:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e",linkTextOpen:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e",hideIcon:!0,iconClass:"readmore-icon",iconClassOpen:"readmore-icon--hidden",onWindowResize:function(){this.updateState()}};$.extend(t.prototype,{init:function(){this.initWrap(),this.initLink(),this.settings.addClass&&this.$el.addClass(this.settings.addClass),"function"==typeof this.settings.onWindowResize&&$(window).on("resize.readmore orientationchange",$.proxy(this.settings.onWindowResize,this)),this.updateState()},initWrap:function(){this.$el.wrapInner('<div class="'+this.settings.wrapClass+'"></div>'),this.$wrap=this.$el.find("> :first"),this.wrapTextNodes()},wrapTextNodes:function(){this.$wrap.contents().filter(function(){return 3===this.nodeType&&""!==$.trim(this.nodeValue)}).wrap("<p></p>").end().filter("br").remove()},initLink:function(){this.$linkText=$("<button>",{"class":this.settings.buttonClass,text:this.settings.linkText}),this.$link=$("<a>",{"class":this.settings.linkClass}),this.settings.addLinkClass&&this.$link.addClass(this.settings.addLinkClass),this.$link.append(this.$linkText),this.settings.hideIcon||(this.$icon=$("<i>",{"class":this.settings.iconClass}),this.$link.append(this.$icon)),this.$link.on("click",$.proxy(function(t){t.preventDefault(),this.toggleState()},this)),this.$el.append(this.$link)},calculateHeightClose:function(){var t=this,i=[],s=0;this.$wrap.find(" > *").each(function(){var e=parseInt($(this).css("marginTop"),10),n=parseInt($(this).css("paddingTop"),10),a=$(this).position().top,h=$(this).height(),l=Math.ceil(h/t.settings.lineHeight);for(s=0;l>s;s++)i.push({top:a+e+n+t.settings.lineHeight*s,height:t.settings.lineHeight})});var e=i.length<=this.settings.size;return e?this.$wrap[0].scrollHeight:i[this.settings.size-1].top+i[this.settings.size-1].height},recalculateHeight:function(){this.heightClosed=this.calculateHeightClose(),this.heightOpen=this.$wrap[0].scrollHeight},updateState:function(t){this.recalculateHeight();var i=this.heightClosed==this.heightOpen;this.$link.toggleClass(this.settings.linkClassHidden,i),this.$wrap.toggleClass(this.settings.wrapClassOpen,i),i?this.$wrap.css("height","auto"):this.$wrap.css("height",this.heightClosed+"px")},toggleState:function(){this.$link.toggleClass(this.settings.linkClassOpen),this.$wrap.toggleClass(this.settings.wrapClassOpen),this.settings.hideIcon||this.$icon.toggleClass(this.settings.iconClassOpen),this.$link.hasClass(this.settings.linkClassOpen)?(this.$wrap.css("height","auto"),this.$linkText.html(this.settings.linkTextOpen)):(this.$wrap.css("height",this.heightClosed),this.$linkText.html(this.settings.linkText))}}),$.fn.readMore=function(s){this.each(function(){$.data(this,"plugin_"+i)||$.data(this,"plugin_"+i,new t(this,s))})}}();var params=responsiveParams();params.onWindowResize=function(){$.extend(this.settings,responsiveParams()),this.updateState()};