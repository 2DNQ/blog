<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Пишем свой шаблон для Эгеи</title>

		<!--[ Meta ]-->
			<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="robots" content="index, follow" />
	
	<meta name="title" content="Пишем свой шаблон для Эгеи · Milkleaks" />
	<meta name="description" content="Написать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры. Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так, как хотим чтобы назывался наш шаблон. Например «ghost» — ../themes/ghost...."/>
	<meta name="keywords" content="Веб, Эгея, Гайд, " />
	
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Milkleaks">	
	<meta property="og:title" content="Пишем свой шаблон для Эгеи · Milkleaks" />
	<meta property="og:description" content="Написать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры. Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так, как хотим чтобы назывался наш шаблон. Например «ghost» — ../themes/ghost...."/>
	<meta property="og:url" content="https://milkleaks.ru/blog/pishem-svoy-shablon-dlya-egei/">
    <meta property="og:locale" content="ru">
	<meta property="og:image" content="http://res.cloudinary.com/milkleaks/image/upload/c_thumb,h_360,q_100,w_640/v1519562826/thumb_hp106z.jpg" />
	<meta property="og:image:width" content="640">
	<meta property="og:image:height" content="360">
	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Пишем свой шаблон для Эгеи · Milkleaks">
	<meta name="twitter:description" content="Написать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры. Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так, как хотим чтобы назывался наш шаблон. Например «ghost» — ../themes/ghost....">
	<meta name="twitter:image:src" content="http://res.cloudinary.com/milkleaks/image/upload/c_thumb,h_360,q_100,w_640/v1519562826/thumb_hp106z.jpg">
	<meta name="twitter:url" content="https://milkleaks.ru/blog/pishem-svoy-shablon-dlya-egei/">
	<meta name="twitter:domain" content="https://milkleaks.ru">
	
	<meta name="yandex-verification" content="74c3b5c777ee0ba1" />
	<meta name="google-site-verification" content="jqmtruexSTI1O_HYicSlVMgM4nNh_Di_7zlyTbYlMc8" />
	
	<link rel="canonical" href="https://milkleaks.ru/blog/pishem-svoy-shablon-dlya-egei/">
	<link rel="alternate" type="application/rss+xml" title="Milkleaks · Блог о компьютерных играх, фильмах, книгах, вебе и всем прочем." href="https://milkleaks.ru/feed.xml" />
		
		<!--[ CSS ]-->
		<link rel="stylesheet" type="text/css" href="/static/style.css" />

		<!--[ JS ]-->
		<script type="text/javascript">base_url = "https://milkleaks.ru";</script>
	</head>

	<body class="space-in-h-micro-xs space-in-h-mili-md space-in-h-base-lg space-auto-h-xl ">
<header class="space-in-top-mili-xs space-minus-h-micro-xs space-minus-h-mili-md space-minus-h-base-lg">
	<div class="space-in-h-micro-xs space-in-h-mili-md space-in-h-base-lg row row row-middle-sm">
		<div class="col-xs-12 col-sm-shrink">
			<div class="logo" data-js="logo">
				<a class="link-logo" href="/">
					<span></span>
					<svg class="logotype" version="1.0" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 120.000000 120.000000" preserveAspectRatio="xMidYMid meet">
						<g class="logotype-path" transform="translate(0.000000,120.000000) scale(0.100000,-0.100000)" stroke="none">
							<path d="M330 1186 c0 -7 -7 -20 -17 -27 -23 -19 -53 -88 -53 -123 0 -42 50 -102 142 -170 76 -56 117 -100 105 -112 -3 -3 -28 3 -56 13 -45 15 -53 16 -61 4 -13 -22 4 -45 55 -78 66 -42 59 -70 -32 -127 -49 -30 -53 -44 -20 -73 34 -31 60 -42 89 -36 20 4 30 1 34 -10 9 -25 -15 -84 -41 -101 -14 -9 -32 -30 -40 -46 -15 -28 -14 -33 10 -85 31 -64 168 -205 199 -205 25 0 95 83 128 150 47 97 27 320 -39 417 -31 46 -30 69 5 76 32 7 76 66 66 91 -7 19 -18 20 -43 4 -10 -6 -27 -8 -37 -4 -16 6 -13 12 26 44 144 119 182 180 161 257 -15 57 -78 124 -102 110 -6 -4 0 -19 15 -40 15 -19 26 -36 26 -39 0 -2 -16 -2 -35 1 -28 5 -35 2 -35 -11 0 -9 8 -19 18 -23 25 -9 52 -44 52 -69 0 -29 -27 -51 -42 -36 -23 23 -35 13 -34 -26 1 -46 -32 -83 -78 -87 -25 -2 -33 -8 -42 -34 -5 -17 -18 -39 -28 -49 -17 -16 -20 -15 -57 28 -21 25 -42 53 -45 62 -3 9 -20 22 -39 28 -18 6 -63 40 -99 75 -74 71 -82 97 -41 135 34 32 33 52 -2 44 -27 -7 -27 -6 -11 12 9 10 20 31 23 47 6 21 4 27 -9 27 -9 0 -16 -6 -16 -14z"/>
						</g>
					</svg>							
				</a>
			</div>
		</div>
		<div class="col-xs-12 col-sm space-in-top-micro-xs space-in-top-zero-md space-in-left-zero-md">
			<div class="logo-txt">
				<span class="space-auto-h-xs space-out-h-zero-md logo-name">Запись #63</span>
			</div>
		</div>
	</div>
</header>

<section class="space-minus-h-base-xl">
	<article class="space-in-v-mega-xs space-in-v-giga-xl slide-up-fade-in js-toc-content post ">
	<h1>Пишем свой шаблон для Эгеи</h1>

	
	


	
		<nav class="space-out-top-micro-xs space-out-bottom-zero-xs space-out-bottom-mili-md tags">
			<span class="space-out-right-nano-xs">Теги:</span>
			
			
				<a class="space-out-right-nano-xs link tag" href="/blog/tags/гайд/">Гайд,</a>
			
				<a class="space-out-right-nano-xs link tag" href="/blog/tags/эгея/">Эгея</a>
			
		</nav>
	

	
		<div class="toc js-toc"></div>
	

	<p>Написать свой шаблон для <a href="http://blogengine.ru" rel="nofollow" target="_blank">Эгеи</a> не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры.</p>

<a class="anchor" id="more"></a>

<ul>
  <li>Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так, как хотим чтобы назывался наш шаблон. Например «ghost» — ../themes/ghost.</li>
  <li>Файл с каринкой-превьюшкой вашего шаблона должен называться preview@2x.png и находится в корне шаблона.</li>
  <li>Информация о вашем шаблоне хранится в файле theme-info.php в корневой папке шаблона и содержит в себе:</li>
</ul>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="k">return</span> <span class="k">array</span> <span class="p">(</span>
    <span class="s1">'display_name'</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span>
        <span class="s1">'en'</span> <span class="o">=&gt;</span> <span class="s1">'Ghost'</span><span class="p">,</span>
        <span class="s1">'ru'</span> <span class="o">=&gt;</span> <span class="s1">'Призрак'</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">);</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Называем свою тему для русской и английской версии для отображения в настройках сайта.</p>

<h2 id="структура-папок">Структура папок</h2>

<div block="">
    <p><mark>../themes/ghost/images</mark> — Папка с изображениями темы.</p>
    <p><mark>../themes/ghost/js</mark> — Папка со скриптами.</p>
    <p><mark>../themes/ghost/styles</mark> — Папка со стилями.</p>
    <p><mark>../themes/ghost/templates</mark> — Файлы шаблона.</p>
</div>

<p>Если файлов в папках вашего шаблона нет, они будут браться из стандартной темы Эгеи, которая располагается по пути <code class="highlighter-rouge">../system/theme</code>.</p>

<h2 id="шаблоны">Шаблоны</h2>

<p>Теперь стоит подробнее разобрать содержимое папки <code class="highlighter-rouge">../system/theme/templates</code> стандартного шаблона Эгеи. Чтобы понять как выглядит тот или иной элемент шаблона я добавила скриншоты.</p>

<hr class="easy">

<p><code class="highlighter-rouge">author-menu.tmpl.php</code> — Меню автора.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/01_u94w7j.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/01_u94w7j.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">comments-heading.tmpl.php</code> — Заголовок списка комментариев с счетчиком их количества.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/02_dqegcp.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/02_dqegcp.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">comments.tmpl.php</code> — Список комментариев.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/03_oiureh.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/03_oiureh.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">drafts.tmpl.php</code> — Список черновиков.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/04_gegc6o.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/04_gegc6o.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-comment.tmpl.php</code> — Форма комментирования.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/05_iffrnu.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/05_iffrnu.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-database.tmpl.php</code> — Форма подключения к базе данных.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/06_yor8w5.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/06_yor8w5.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-install.tmpl.php</code> — Форма установки Эгеи.</p>

<hr class="easy">

<p><code class="highlighter-rouge">form-login.tmpl.php</code> — Форма авторизации.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/07_tyqwia.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/07_tyqwia.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-note-delete.tmpl.php</code> — Форма удаления поста.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/08_qujnf6.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/08_qujnf6.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-note-publish.tmpl.php</code> — Кнопка публикации поста.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/09_li03z6.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/09_li03z6.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-note.tmpl.php</code> — Форма публикации поста.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/10_ufuc0b.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/10_ufuc0b.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-password.tmpl.php</code> — Форма смены админ-пароля.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/11_hhe2au.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/11_hhe2au.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-preferences.tmpl.php</code> — Форма общих настроек блога.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/13_i8udli.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/13_i8udli.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-tag-delete.tmpl.php</code> — Форма удаления тега.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/14_jwipj8.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/14_jwipj8.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-tag.tmpl.php</code> — Форма редактирования тега.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/15_p02lox.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/15_p02lox.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">head.tmpl.php</code> — Метатеги в head.</p>

<hr class="easy">

<p><code class="highlighter-rouge">heading.tmpl.php</code> — Заголовки.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/16_sxxqud.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/16_sxxqud.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">init-script.tmpl.php</code> — Подключение дополнительных скриптов.</p>

<hr class="easy">

<p><code class="highlighter-rouge">layout.tmpl.php</code> — Основная разметка шаблона внтури body.</p>

<hr class="easy">

<p><code class="highlighter-rouge">login-element.tmpl.php</code> — Кнопка авторизации.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/17_gtjx4a.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/17_gtjx4a.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">main.tmpl.php</code> — Общая разметка, подключение скриптов.</p>

<hr class="easy">

<p><code class="highlighter-rouge">notes-list.tmpl.php</code> — Список избранных постов.</p>

<hr class="easy">

<p><code class="highlighter-rouge">notes.tmpl.php</code> — Шаблон поста. Заголовок, текст, дата, теги, ссылка на комментарии.</p>

<hr class="easy">

<p><code class="highlighter-rouge">pages-earlier.tmpl.php</code> — Кнопка к постам «Ранее».</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/18_z1fn67.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/18_z1fn67.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">pages-later.tmpl.php</code> — Кнопка к постам «Позднее».</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/19_twa7wi.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/19_twa7wi.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">pages.tmpl.php</code> — Навигация между постами.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055161/20_vsrib7.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055161/20_vsrib7.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">popular.tmpl.php</code> — Блок популярных постов.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/21_ukwlhu.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/21_ukwlhu.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">search.tmpl.php</code> — Форма поиска и теги.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/22_r7lfmw.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/22_r7lfmw.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">tags-menu.tmpl.php</code> — Список избранных тегов.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/23_lbl7ii.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/23_lbl7ii.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">tags.tmpl.php</code> — Страница тегов.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055161/24_fldmsy.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055161/24_fldmsy.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">user-blockture.tmpl.php</code> — Аватар блога.</p>

<figure class="picture wrap left">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055161/25_zw1ide.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055161/25_zw1ide.png">
				</a>
				
			</figure>

<hr class="easy">

<p>Чтобы внести изменения в ту или иную часть шаблона скопируйте соответствующий файл из стандартной темы <code class="highlighter-rouge">../system/theme/templates</code> в папку <code class="highlighter-rouge">templates</code> вашего шаблона и уже там производите все изменения.</p>

<h2 id="подключение-частей-шаблона">Подключение частей шаблона</h2>

<p>Официальная <a href="https://docs.google.com/document/d/1yn7KCHq47oli7IH--skhymjjj2OSlXjcyGOxZ2ZEPeA/edit#heading=h.j2h2wr6xhlie" rel="nofollow" target="_blank">документация</a> по шаблонам Эгеи сообщает:</p>

<blockquote>
  <p>Шаблон может вызывать другие шаблоны для отображения конкретного фрагмента:
_T () — вызывает шаблон по имени.
_T_<span class="caps">FOR</span> () — вызывает шаблон по имени, если в массиве $content есть ключ с таким именем.
_X () — вставляет дополнительный блок (не забывайте это использовать в своих шаблонах там, где это делают комплектные).
Шаблон layout.tmpl.php «срабатывает» потому, что main.tmpl.php вызывает его для формирования тела страницы.</p>
</blockquote>

<p>Давайте разберем это на примере — добавим блок со случайной цитатой. Создадим файл <code class="highlighter-rouge">quote.tmpl.php</code> в <code class="highlighter-rouge">../themes/ghost/templates</code> со следующим несложным кодом:</p>

<div full="" color="" class="light-dark">

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"e2-quote"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span>
        <span class="nv">$quotes</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'
        &lt;p&gt;Ибо здесь, похоже, мы не найдем ничего, кроме, как сказала бы Мильва, ремонтизма.&lt;/p&gt;
        &lt;span&gt;Анджей Сапковский - Владычица Озера&lt;/span&gt;'</span><span class="p">;</span>
        <span class="nv">$quotes</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'
        &lt;p&gt;Цири громко чертыхнулась, повторив любимое выражение Весемира, значение которого было ей не вполне ясно. Потом добавила еще несколько слов, услышанных от Ярпена Зигрина, значение которых было для нее вообще полнейшей загадкой.&lt;/p&gt;
        &lt;span&gt;Анджей Сапковский - Кровь Эльфов&lt;/span&gt;'</span><span class="p">;</span>
        <span class="nv">$quotes</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'
        &lt;p&gt;Весемир кивал, время от времени вставляя замечания, из которых следовало только то, что «в его времена» все было лучше, логичнее, приличнее и здоровее.&lt;/p&gt;
        &lt;span&gt;Анджей Сапковский - Последнее Желание&lt;/span&gt;'</span><span class="p">;</span>

        <span class="nb">srand</span> <span class="p">((</span><span class="nx">double</span><span class="p">)</span> <span class="nb">microtime</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">);</span>
        <span class="nv">$random_number</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">count</span><span class="p">(</span><span class="nv">$quotes</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">echo</span> <span class="p">(</span><span class="nv">$quotes</span><span class="p">[</span><span class="nv">$random_number</span><span class="p">]);</span>
    <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

</div>

<p>Теперь достаточно открыть <code class="highlighter-rouge">layout.tmpl.php</code> и где-нибудь перед footer’ом добавить вывод шаблона <code class="highlighter-rouge">quote.tmpl.php</code> средством специального макроса.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_T</span> <span class="p">(</span><span class="s1">'quote'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Чтобы блок с случайными цитатами отображался только на главной странице оберните его соответствующим параметром:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$content</span><span class="p">[</span><span class="s1">'class'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'frontpage'</span><span class="p">)</span> <span class="p">{</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="nx">_T</span> <span class="p">(</span><span class="s1">'quote'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="p">}</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Таким несложным способом вы можете добавлять новые блоки на страницы своего блога. По такому же принципу строятся все остальные страницы шаблона. Например если мы посмотрим стандартный <code class="highlighter-rouge">layout.tmpl.php</code> с 47 по 59 строку, то увидим как подхватываются почти все основные шаблоны сайта.</p>

<h2 id="подключение-собственных-js-и-css">Подключение собственных <span class="caps">JS</span> и <span class="caps">CSS</span>
</h2>

<p>Для подключения <span class="caps">JS</span> и <span class="caps">CSS</span> в Эгее также существуют специальные макросы. Для наглядности откройте стандартный <code class="highlighter-rouge">main.tmpl.php</code> и посмотрите в конец файла, после закрывающегося тега <code class="highlighter-rouge">body</code>:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_CSS</span> <span class="p">(</span><span class="s1">'main'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="nx">_JS</span> <span class="p">(</span><span class="s1">'main'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Здесь подхватываются <code class="highlighter-rouge">../js/main.js</code> и <code class="highlighter-rouge">../styles/main.css</code> из папки вашего шаблона. Для примера, давайте добавим анимацию появления постов с помощью <a href="https://github.com/matthieua/WOW" rel="nofollow" target="_blank">wow.js</a>. Скачайте сам wow.js и положите в папку <code class="highlighter-rouge">js</code> вашего шаблона. Также скачайте <a href="https://github.com/daneden/animate.css" rel="nofollow" target="_blank">animate.css</a> и разместите в папке <code class="highlighter-rouge">styles</code>. Откройте <code class="highlighter-rouge">main.tmpl.php</code> и подключите их:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_CSS</span> <span class="p">(</span><span class="s1">'animate'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="nx">_JS</span> <span class="p">(</span><span class="s1">'wow'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Далее в файл <code class="highlighter-rouge">init-script.tmpl.php</code> понадобится добавить следующий код с настройками <code class="highlighter-rouge">wow.js</code>:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="kd">var</span> <span class="nx">wow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WOW</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="na">boxClass</span><span class="p">:</span> <span class="s1">'wow'</span><span class="p">,</span>
            <span class="na">animateClass</span><span class="p">:</span> <span class="s1">'animated'</span><span class="p">,</span>
            <span class="na">offset</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">mobile</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">live</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">callback</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">box</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">},</span>
            <span class="na">scrollContainer</span><span class="p">:</span> <span class="kc">null</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="nx">wow</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Теперь остается открыть шаблон <code class="highlighter-rouge">notes.tmpl.php</code> и к основному div’у поста (18 строка) добавить класс <code class="highlighter-rouge">wow fadeIn</code>, а в <code class="highlighter-rouge">main.css</code> добавить <code class="highlighter-rouge">.wow { visibility: hidden; }</code>. По аналогии с данным примером в ваш шаблон можно добавлять какие угодно скрипты и стили.</p>

<p class="aside">Смотрите ещё: <a href="/blog/kat-v-egee">Кат в Эгее</a> и <a href="/blog/svoi-shrifty-v-egee/">Свои шрифты в Эгее</a>.</p>



	<nav class="actions">
		<time>29 апреля 2017</time>
	</nav>

</article>

<nav class="row row-between-sm space-out-h-base-xl space-in-bottom-mega-xs space-in-bottom-giga-xl pagination">
	<span class="col-xs-12 col-sm-4 space-in-v-nano-xs space-in-v-zero-md space-in-left-zero-xl previous">
		
			<a title="Wallpaper Engine" class="link" href="/blog/wallpaper-engine/">&larr; Ранее</a>
		
	</span>	
	<span class="col-xs-12 col-sm-4 space-in-v-nano-xs space-in-v-zero-md space-in-right-zero-xl next">
		
			<a title="What Remains of Edith Finch" class="link" href="/blog/what-remains-of-edith-finch/">Позднее &rarr;</a>
		
	</span>
</nav>
</section>

<footer class="space-in-bottom-mili-xs space-minus-h-micro-xs space-minus-h-mili-md space-minus-h-base-lg">
	<div class="space-in-h-micro-xs space-in-h-mili-md space-in-h-base-lg row row-middle-md">
		<div class="col-xs-12 space-in-bottom-mili-xs menu">
			
				<nav class="breadcrumbs">
	<ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
		
		
			

			
				<li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
					<a property="item" typeof="WebPage" href="https://milkleaks.ru"><span property="name">Главная</span><meta property="position" content="1" /></a>
				</li>
				
			

			

			

			<li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
				<a property="item" typeof="WebPage" href="/blog/"><span property="name">Блог</span><meta property="position" content="2" /></a>
			</li>		
		
			

			

			
				

		
			
			
					
				<li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
					<a property="item" typeof="WebPage" href="/blog/categories/веб/"><span property="name">Веб</span><meta property="position" content="3" /></a>
				</li>
							
			
		

		
		
			

			
		
			

			
		
			

			
				<li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
					<span property="name">Пишем свой шаблон для Эгеи</span>
				</li>
				
	</ol>
</nav>
			
		</div>

		<div class="col-xs-12 col-md-shrink copyright">
			Александра Травкина &copy; 2015 - 2018 &middot; <a class="link-subcontrol" target="_blank" href="/feed"><b>RSS</b></a><br />
			Электропочта <a class="link-subcontrol" target="_blank" href="mailto:hello@milkleaks.ru">hello@milkleaks.ru</a> или телеграм <a class="link-subcontrol" target="_blank" href="https://t.me/sashatravkina">@sashatravkina</a>.
		</div>

		<div class="col-xs-12 col-md-shrink space-in-top-mili-xs space-in-top-zero-lg space-auto-left-lg search">
			<div class="search-form">
				<input type="text" id="search-input" class="search-box" />
				<span class="search-button">
					<i class="fa fa-search open" aria-hidden="true"></i>
					<i class="fa fa-times close" aria-hidden="true"></i>
				</span>
			</div>
			<div class="dropdown">
				<ul class="results" id="results-container"></ul>
			</div>
		</div>
	</div>
</footer>
		<!--[ JS ]-->
		<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript" src="/static/js/jquery.js"></script>
<script type="text/javascript" src="/static/js/jekyll-search.js"></script>

<script type="text/javascript" src="/static/modules/primarycolor/primarycolor.js"></script>
<script type="text/javascript" src="/static/modules/fotorama/fotorama.js"></script>
<script type="text/javascript" src="/static/modules/lightbox/lightbox.js"></script>
<script type="text/javascript" src="/static/modules/tocbot/tocbot.js"></script>
<script type="text/javascript" src="/static/modules/likely/likely.js"></script>

<script type="text/javascript" src="/static/js/template.js"></script>
		
	</body>
</html>