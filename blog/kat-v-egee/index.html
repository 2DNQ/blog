<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Кат в Эгее</title>

			<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="robots" content="index, follow" />
	
	<meta name="title" content="Кат в Эгее · Milkleaks" />
	<meta name="description" content="Как известно Эгея не имеет функции скрытия длинных постов под катом, в этой статье Илья Бирман объясняет почему. Тем не менее, многие нуждаются в сокращении слишком длинных постов, а потому, в этой заметке я расскажу как «прикрутить» кат к Эгее с использованием скрипта readmore.js. Особенность readmore.js в том, что раскрывать..."/>
	<meta name="keywords" content="Веб, Гайд, Эгея, " />
	
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Milkleaks">	
	<meta property="og:title" content="Кат в Эгее · Milkleaks" />
	<meta property="og:description" content="Как известно Эгея не имеет функции скрытия длинных постов под катом, в этой статье Илья Бирман объясняет почему. Тем не менее, многие нуждаются в сокращении слишком длинных постов, а потому, в этой заметке я расскажу как «прикрутить» кат к Эгее с использованием скрипта readmore.js. Особенность readmore.js в том, что раскрывать..."/>
	<meta property="og:url" content="https://milkleaks.ru/blog/kat-v-egee/">
    <meta property="og:locale" content="ru">
	<meta property="og:image" content="" />
	<meta property="og:image:width" content="640">
	<meta property="og:image:height" content="360">
	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Кат в Эгее · Milkleaks">
	<meta name="twitter:description" content="Как известно Эгея не имеет функции скрытия длинных постов под катом, в этой статье Илья Бирман объясняет почему. Тем не менее, многие нуждаются в сокращении слишком длинных постов, а потому, в этой заметке я расскажу как «прикрутить» кат к Эгее с использованием скрипта readmore.js. Особенность readmore.js в том, что раскрывать...">
	<meta name="twitter:image:src" content="">
	<meta name="twitter:url" content="https://milkleaks.ru/blog/kat-v-egee/">
	<meta name="twitter:domain" content="https://milkleaks.ru">
	
	<meta name="yandex-verification" content="74c3b5c777ee0ba1" />
	<meta name="google-site-verification" content="jqmtruexSTI1O_HYicSlVMgM4nNh_Di_7zlyTbYlMc8" />
	
	<link rel="canonical" href="https://milkleaks.ru/blog/kat-v-egee/">
	<link rel="alternate" type="application/rss+xml" title="Milkleaks · Блог о компьютерных играх, фильмах, книгах, вебе и всем прочем." href="https://milkleaks.ru/feed.xml" />
		<script type="text/javascript">base_url = "https://milkleaks.ru";</script>
		
		<!--[ CSS ] -->
		<link rel="stylesheet" type="text/css" href="/assets/style-542328ba3d8699a4f26d5afdda94f279bd384714f6e8a71413832e13f8673ef7.css">

	</head>

	<body >
<nav class="common full">
	<div class="navigation wrapper">
		<div class="avatar">
			<a href="/">
				<div class="logo"></div>
			</a>
		</div>
	</div>
	<div class="search-base aside">
		<div class="frame">
			<div class="search">
				<div class="search-form">
					<input type="text" id="search-input" placeholder="Найти..." class="search-box" />
					<span class="search-button">
						<i class="fa fa-search open" aria-hidden="true"></i>
						<i class="fa fa-times close" aria-hidden="true"></i>
					</span>
				</div>
				<ul id="results-container" class="dropdown"></ul>
			</div>
		</div>
	</div>
</nav>

	<article class="content post single">
	<header class="common">
		<div class="wrapper">
			<h1 class="title">Кат в&nbsp;Эгее</h1>
			
		</div>
	</header>

	
	


	<div class="common">
		<div class="entry">
			
				<p>Как известно <a href="https://blogengine.ru" rel="nofollow" target="_blank">Эгея</a> не имеет функции скрытия длинных постов под катом, в этой <a href="https://ilyabirman.ru/meanwhile/all/no-cut-in-aegea/" rel="nofollow" target="_blank">статье</a> Илья Бирман объясняет почему. Тем не менее, многие нуждаются в сокращении слишком длинных постов, а потому, в этой заметке я расскажу как «прикрутить» кат к Эгее с использованием скрипта <a href="http://jedfoster.com/Readmore.js/" rel="nofollow" target="_blank">readmore.js</a>. Особенность readmore.js в том, что раскрывать длинные записи для чтения можно без перезагрузки страницы и новых вкладок в браузере, нечто подобное используется, например, ВКонтакте или на Пикабу.</p>

<p>Скачаем сам скрипт <a href="https://github.com/jedfoster/Readmore.js" rel="nofollow" target="_blank">readmore.js</a> с GitHub и поместим файл <mark>readmore.min.js</mark> в заранее созданную папку <mark>js</mark> в корне вашего шаблона.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../themes/plain/js/readmore.min.js</code></pre></figure>

<p>Затем создадим файл <mark>script.tmpl.php</mark> в папке <mark>templates</mark> шаблона, в нём мы будем подключать и настраивать сам скрипт.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../themes/plain/templates/script.tmpl.php</code></pre></figure>

<p>Добавим в созданный файл немного настроек, полный список которых можно посмотреть на странице скрипта на GitHub.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.e2-note-short'</span><span class="p">).</span><span class="nx">readmore</span><span class="p">({</span>
        <span class="na">speed</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="c1">// Скорость раскрытия ката</span>
        <span class="na">collapsedHeight</span><span class="p">:</span> <span class="mi">1250</span><span class="p">,</span> <span class="c1">// Длинна заметки после которой будет добавлен кат</span>
        <span class="na">moreLink</span><span class="p">:</span> <span class="s1">'&lt;div class="more"&gt;&lt;a class="morelink" href="#"&gt;Показать полностью&lt;/a&gt;&lt;/div&gt;'</span><span class="p">,</span> <span class="c1">// Классы кнокпи раскрытия ката</span>
        <span class="na">lessLink</span><span class="p">:</span> <span class="s1">''</span> <span class="c1">// Классы кнокпи скрытия ката</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Теперь добавим класс <mark>.e2-note-short</mark> на основании которого будет добавляться кат к вашим записям, для этого нужно скопировать файл:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../system/theme/templates/notes.tmpl.php</code></pre></figure>

<p>И поместить в папку <mark>templates</mark> вашего шаблона.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../themes/plain/templates/notes.tmpl.php</code></pre></figure>

<p>Затем откроем <mark>notes.tmpl.php</mark> где на 27 строке добавим к <code class="highlighter-rouge">&lt;article&gt;</code> класс <mark>e2-note-short</mark> обернув его <mark>php</mark> параметром, чтобы кат не работал на отдельной странице с записью.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$content</span><span class="p">[</span><span class="s1">'class'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'note'</span><span class="p">)</span> <span class="p">{</span> <span class="cp">?&gt;</span><span class="s">e2-note-short</span><span class="cp">&lt;?php</span> <span class="p">}</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span></code></pre></figure>

<p>Теперь в папке <mark>styles</mark> шаблона создадим файл <mark>style.css</mark> со стилями кнопки ката. В дальнейшем в этот <mark>css</mark> можно добавлять любые собственные стили без конфликта с основным файлом стилей шаблона Эгеи.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../themes/plain/styles/style.css</code></pre></figure>

<p>Добавим стилей. Их можно отредактировать на свой вкус.</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.more</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.more</span><span class="nd">::before</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="n">-moz-linear-gradient</span><span class="p">(</span><span class="nb">top</span><span class="p">,</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">0</span><span class="p">)</span> <span class="m">40%</span><span class="p">,</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">1</span><span class="p">)</span> <span class="m">80%</span><span class="p">);</span>
    <span class="nl">background</span><span class="p">:</span> <span class="n">-webkit-linear-gradient</span><span class="p">(</span><span class="nb">top</span><span class="p">,</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">0</span><span class="p">)</span> <span class="m">40%</span><span class="p">,</span><span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">1</span><span class="p">)</span> <span class="m">80%</span><span class="p">);</span>
    <span class="nl">background</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span><span class="p">,</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">0</span><span class="p">)</span> <span class="m">40%</span><span class="p">,</span><span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">255</span><span class="p">,</span><span class="m">1</span><span class="p">)</span> <span class="m">80%</span><span class="p">);</span>
    <span class="nl">filter</span><span class="p">:</span> <span class="n">progid</span><span class="p">:</span><span class="n">DXImageTransform</span><span class="p">.</span><span class="n">Microsoft</span><span class="p">.</span><span class="n">gradient</span><span class="p">(</span> <span class="n">startColorstr</span><span class="err">=</span><span class="s2">'#00ffffff'</span><span class="p">,</span> <span class="n">endColorstr</span><span class="err">=</span><span class="s2">'#ffffff'</span><span class="p">,</span><span class="n">GradientType</span><span class="err">=</span><span class="m">0</span> <span class="p">);</span> 
    <span class="nl">pointer-events</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">-150px</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.morelink</span> <span class="p">{</span>
    <span class="nl">-webkit-border-radius</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">-moz-border-radius</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="m">#f1f3f4</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">720px</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#8890a7</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">14px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.morelink</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="m">#e2e5e6</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#8890a7</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Далее, необходимо подключить все созданные файлы, для этого копируем <mark>main.tmpl.php</mark>.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../system/theme/templates/main.tmpl.php</code></pre></figure>

<p>И вставляем в папку <mark>templates</mark> вашего шаблона.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">../themes/plain/templates/main.tmpl.php</code></pre></figure>

<p>Теперь отредактируем <mark>main.tmpl.php</mark> добавив стили после основных стилей <code class="highlighter-rouge"><span class="cp">&lt;?php</span> <span class="nx">_CSS</span> <span class="p">(</span><span class="s1">'main'</span><span class="p">)</span> <span class="cp">?&gt;</span></code> в конце файла.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_CSS</span> <span class="p">(</span><span class="s1">'style'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>А после основных скриптов шаблона <code class="highlighter-rouge"><span class="cp">&lt;?php</span> <span class="nx">_JS</span> <span class="p">(</span><span class="s1">'main'</span><span class="p">)</span> <span class="cp">?&gt;</span></code> добавим сам <mark>readmore.js</mark>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_JS</span> <span class="p">(</span><span class="s1">'readmore.min'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Также перед закрывающимся тегом <code class="highlighter-rouge">&lt;/html&gt;</code> добавим файл с настройками скрипта.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_T</span> <span class="p">(</span><span class="s1">'script'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Таким образом мы добавили кат в Эгею.</p>

<p><img src="https://i.imgur.com/KcpY7yg.png" alt="Кат в Эгее"></p>

<p left="">Смотрите также: <a href="/blog/svoi-shrifty-v-egee/">Свои шрифты в Эгее</a> и <a href="/blog/pishem-svoy-shablon-dlya-egei/">Пишем свой шаблон для Эгеи</a>.</p>

<p>Возможно где-то придется отредактировать стили по ситуации, подобрать оптимальную длину заметки после которой кат будет скрывать запись и тому подобное. Стандартный шаблон <mark>plain</mark> здесь используется в качестве примера, но намного лучше сделать его копию и переименовать на свой лад, дабы при последующих обновлениях Эгеи ничего лишнего не перезаписалось.</p>


			
		</div>
			
		<div class="actions">
			<div class="tags">
				<span class="date">23 января 2018</span>
				
													
						<a href="/category/веб/" class="category">Веб</a>
					
				

				
				<span class="point">·</span>
					
					
						<a href="/tag/гайд/">
							Гайд,
						</a>
					
						<a href="/tag/эгея/">
							Эгея
						</a>
					
				
			</div>
		</div>
	</div>
</article>

<div class="pagination common full">
	
		<a class="next" title="Beat Cop" href="/blog/beat-cop/">Ранее</a>
	
	<span class="page_number ">Запись: 80 из 80</span>
	
</div>

<div class="common full">
	<div class="likely  wrapper">
		<div class="likely__widget likely__widget_rss" onclick="window.open('/feed', '_blank')"><i class="fa fa-rss" aria-hidden="true"></i> Подписаться</div>
		<div data-url="https://milkleaks.ru/blog/kat-v-egee/" data-title="Кат в Эгее · Milkleaks" data-via="sasha_travkina" class="twitter">Твитнуть</div>
		<div data-url="https://milkleaks.ru/blog/kat-v-egee/" data-title="Кат в Эгее · Milkleaks" class="facebook">Поделиться</div>
		<div data-url="https://milkleaks.ru/blog/kat-v-egee/" data-title="Кат в Эгее · Milkleaks" class="vkontakte">Поделиться</div>
		<div data-url="https://milkleaks.ru/blog/kat-v-egee/" data-title="Кат в Эгее · Milkleaks" class="telegram">Отправить</div>
		<div data-url="https://milkleaks.ru/blog/kat-v-egee/" data-title="Кат в Эгее · Milkleaks" class="gplus">Плюсануть</div>
	</div>
</div>
<footer class="common full">
	<div class="copyright wrapper">
		<a href="/about">Александра Травкина</a> &copy; 2015 - 2018 · Электропочта <a href="mailto:hello@milkleaks.ru" target="_blank">hello@milkleaks.ru</a> или телеграм <a href="https://t.me/sashatravkina" target="_blank">@sashatravkina</a>.<br />
		Блог о <a href="/category/игры/">компьютерных играх</a>, <a href="/category/фильмы/">фильмах</a>, <a href="/category/книги/">книгах</a>, <a href="/category/веб/">вебе</a> и <a href="/category/заметки/">всем прочем</a>. А ещё есть <a href="/photo/">фото</a> и архив <a href="/dungeon/">старых</a> записей.<br />
		<a href="http://steambuy.com/partner/milkleaks" target="_blank">Здесь можно купить лицензионные игры со скидкой.</a>
	</div>

	<div class="scroll-to-top aside">
		<a><i class="fa fa-angle-up" aria-hidden="true"></i></a>
	</div>
</footer>
		<!--[ JS ]-->
		<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript" src="/assets/jquery-b50e3d0497f416ee5d7dbeefdbaa98723a2200a8c1428b006ebadda28284bcef.js"></script>
<script type="text/javascript" src="/assets/jekyll-search-7204433405551c7f3443e8466082062d37e6d3db2e5e1c8f124c1bc10fea2396.js"></script>
<script type="text/javascript" src="/assets/fotorama-aebfda04c47491f370486c38568e25aff265f4f95347a0e4abfe9c9f1353b39b.js"></script>
<script type="text/javascript" src="/assets/lightbox-38219f7d2b364b9f29051725c39509889e12bca6fba070e54066d5710f9ae46d.js"></script>
<script type="text/javascript" src="/assets/hyphenator-9030ad3748aef2e496294b0dc2d947f35c51403f8813d24e519fff8cccb28471.js"></script>
<script type="text/javascript" src="/assets/likely-780ace139e84bdd5df86e36fe18413907f96abaf433a7ec48a2acb3dea905c0e.js"></script>
<script type="text/javascript" src="/assets/tocbot-deafbb0615f0bca439dbb779dcfc6337cb76ef05c436ea9eb205029708496a67.js"></script>
<script type="text/javascript" src="/assets/post-e1622ae246c099cf1e081969d1ccc68a3a9d63fbfa188570c627204412e6b40a.js"></script>
<script type="text/javascript" src="/assets/base-8b50d1d7d26d2b32eae53d8388537b866d8111ec1645785de4da72f035074924.js"></script>
	
	</body>
</html>