<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Установка flarum на centOS</title>

			<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="robots" content="index, follow" />
	
	<meta name="description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS’ка довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии,..."/>
	<meta name="keywords" content="IT, Гайд, CMS, " />
	
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Milkleaks">	
	<meta property="og:title" content="Установка flarum на centOS" />
	<meta property="og:description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS’ка довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии,..."/>
	<meta property="og:url" content="http://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/">
    <meta property="og:locale" content="ru">
	<meta property="og:image" content="" />
	<meta property="og:image:width" content="968">
	<meta property="og:image:height" content="504">
	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Установка flarum на centOS">
	<meta name="twitter:description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS’ка довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии,...">
	<meta name="twitter:image:src" content="">
	<meta name="twitter:url" content="http://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/">
	<meta name="twitter:domain" content="http://milkleaks.ru">
	
	<link rel="canonical" href="http://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/">
	<link rel="alternate" type="application/rss+xml" title="Milkleaks: Блог о компьютерных играх, фильмах, книгах, вебе и всем прочем." href="http://milkleaks.ru/feed.xml" />
	
	<meta name="yandex-verification" content="74c3b5c777ee0ba1" />
	<meta name="google-site-verification" content="jqmtruexSTI1O_HYicSlVMgM4nNh_Di_7zlyTbYlMc8" />

		<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<link href="/assets/css/style.css?1504380491304317500" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Merriweather:300,300i,400,400i,700,700i,900,900i&amp;subset=cyrillic" rel="stylesheet">

		<script type="text/javascript" src="https://use.fontawesome.com/d72823af97.js"></script>
		<script type="text/javascript">base_url = "http://milkleaks.ru";</script>
	</head>

	<body>
<nav>
	<div class="common full">
		<div class="wrapper">
			<div class="navigation">
				<div class="avatar">
					<a href="/">
						<img src="http://milkleaks.ru/assets/images/userpic.png" />
					</a>
				</div>
				<div class="frame">
					<div class="menu">
						<a href="/blog/" class="active">Блог</a>
						<a href="/about/" >Об авторе</a>
					</div>	
				</div>
			</div>
		</div>
		<div class="aside">
			<div class="search-base">
	<div class="frame">
		<div class="search">
			<div class="search-form">
				<input type="text" id="search-input" class="search-box" />
				<span class="search-button">
					<i class="fa fa-search open" aria-hidden="true"></i>
					<i class="fa fa-times close" aria-hidden="true"></i>
				</span>
			</div>
			<ul id="results-container" class="dropdown"></ul>
		</div>
	</div>
</div>
		</div>
	</div>
</nav>

<div class="content">
	<div class="post-single">
		<article class="post">
			<div class="common">
				<div class="header">
					<h1 class="title">Установка flarum на centOS</h1>
					
				</div>
			</div>

			

			<div class="common">
				<div class="maintenance single">
					
					
					<div class="entry js-toc-content">
						<p>Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — <a href="http://flarum.org/">flarum</a>. Судя по тому, что уже есть, CMS’ка довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии, захотелось поставить её на поддомен и посмотреть чуть более детально. Собственно говоря, в этой статье я описываю процесс установки flarum’a на centOS 7. А потому, если вы не связаны со сферой web’a, можете пролистывать дальше.</p>

<p>Ставилась flarum на centOS 7 самого обычного <a href="https://www.ihor.ru/vds">VDS хостинга</a>. Для установки требуется Apache (с mod_rewrite), Nginx и Lighttpd. PHP версии 5.5 и выше, MySQL 5.5 и конечно же SSH консоль, так как ставится flarum через Сomposer.</p>

<h2 id="Обновляем-php">Обновляем PHP</h2>

<p>Так как на сервере стоял PHP версии 5.4 нам придется его обновить. Открываем консоль и добавляем репозиторий:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">rpm</span> <span class="o">-</span><span class="no">Uvh</span> <span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">rpms</span><span class="p">.</span><span class="nf">famillecollet</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="n">enterprise</span><span class="o">/</span><span class="n">remi</span><span class="o">-</span><span class="n">release</span><span class="o">-</span><span class="mi">7</span><span class="p">.</span><span class="nf">rpm</span></code></pre></figure>

<p>После добавления репозитория на сервере появится папка /etc/yum.repos.d, переходим в папку и редактируем файл remi.repo. Ищем секцию:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="n">remi</span><span class="o">-</span><span class="n">php56</span><span class="p">]</span>
<span class="nb">name</span><span class="o">=</span><span class="no">Les</span> <span class="no">RPM</span> <span class="n">de</span> <span class="n">remi</span> <span class="n">de</span> <span class="no">PHP</span> <span class="mi">5</span><span class="o">.</span><span class="mi">6</span> <span class="n">pour</span> <span class="no">Enterprise</span> <span class="no">Linux</span> <span class="mi">6</span> <span class="o">-</span> <span class="vg">$basearch</span><span class="o">&amp;</span><span class="n">nbsp</span>
<span class="c1">#baseurl=http://rpms.famillecollet.com/enterprise/6/php56/$basearch/</span>
<span class="n">mirrorlist</span><span class="o">=</span><span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">rpms</span><span class="p">.</span><span class="nf">famillecollet</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="n">enterprise</span><span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="n">php56</span><span class="o">/</span><span class="n">mirror</span>
<span class="c1">#WARNING: If you enable this repository, you must also enable "remi" </span>
<span class="n">enabled</span><span class="o">=</span><span class="mi">0</span> 
<span class="n">gpgcheck</span><span class="o">=</span><span class="mi">1</span> 
<span class="n">gpgkey</span><span class="o">=</span><span class="n">file</span><span class="ss">:/</span><span class="o">/</span><span class="sr">/etc/</span><span class="n">pki</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">gpg</span><span class="o">/</span><span class="no">RPM</span><span class="o">-</span><span class="no">GPG</span><span class="o">-</span><span class="no">KEY</span><span class="o">-</span><span class="n">remi</span></code></pre></figure>

<p>И меняем параметр enabled=0 на enabled=1. Аналогично можно обновится с PHP версии 5.4 до 5.5 в соответствующей секции remi-php55.</p>

<p>Далее редактируем /etc/httpd/conf.d/phpmyadmin.conf. Находим строку с параметром php_admin_value open_basedir и добавляем :/usr/share/doc/. Должно получится следующее:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">php_admin_value</span> <span class="n">open_basedir</span> <span class="s2">"/usr/share/phpMyAdmin/:/etc/phpMyAdmin/:/var/lib/phpMyAdmin/:/tmp/:/usr/share/php/:/var/lib/php/session/:/usr/share/doc/"</span></code></pre></figure>

<p>Делается это для того, что бы не возникло проблем при обновлении phpmyadmin.</p>

<p>Теперь в консоль можно ввести следующее:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">yum</span> <span class="n">install</span> <span class="n">php</span> <span class="o">-</span><span class="n">y</span></code></pre></figure>

<p>И PHP обновится до 5.6 версии, соответственно. Проверяем:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">php</span> <span class="o">-</span><span class="n">v</span></code></pre></figure>

<h2 id="Обновляем-остальные-пакеты">Обновляем остальные пакеты</h2>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="err">у</span><span class="n">um</span> <span class="n">update</span></code></pre></figure>

<h2 id="Устанавливаем-lighttpd">Устанавливаем Lighttpd</h2>

<p>Ставим wget:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">wget</span></code></pre></figure>

<p>Обновляем репозитории:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sudo</span> <span class="n">rpm</span> <span class="o">--</span><span class="n">import</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">fedoraproject</span><span class="p">.</span><span class="nf">org</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="mo">060</span><span class="mi">8</span><span class="no">B895</span><span class="p">.</span><span class="nf">txt</span>
<span class="n">sudo</span> <span class="n">wget</span> <span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">dl</span><span class="p">.</span><span class="nf">fedoraproject</span><span class="p">.</span><span class="nf">org</span><span class="o">/</span><span class="n">pub</span><span class="o">/</span><span class="n">epel</span><span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="n">x86_64</span><span class="o">/</span><span class="n">epel</span><span class="o">-</span><span class="n">release</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="mi">8</span><span class="p">.</span><span class="nf">noarch</span><span class="p">.</span><span class="nf">rpm</span>
<span class="n">sudo</span> <span class="n">rpm</span> <span class="o">-</span><span class="n">ivh</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="mi">8</span><span class="p">.</span><span class="nf">noarch</span><span class="p">.</span><span class="nf">rpm</span></code></pre></figure>

<p>Устанавливаем lighttpd:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">lighttpd</span></code></pre></figure>

<p>Прописываем автостарт:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sudo</span> <span class="n">chkconfig</span> <span class="o">--</span><span class="n">levels</span> <span class="mi">235</span> <span class="n">lighttpd</span> <span class="n">on</span></code></pre></figure>

<p>Запускаем и проверяем:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sudo</span> <span class="n">service</span> <span class="n">lighttpd</span> <span class="n">start</span>
<span class="n">sudo</span> <span class="n">service</span> <span class="n">lighttpd</span> <span class="n">status</span></code></pre></figure>

<h2 id="Устанавливаем-composer">Устанавливаем Composer</h2>

<p>Установка composer предельно проста:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">curl</span> <span class="o">-</span><span class="n">sS</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">getcomposer</span><span class="p">.</span><span class="nf">org</span><span class="o">/</span><span class="n">installer</span> <span class="o">|</span> <span class="n">php</span>
<span class="n">mv</span> <span class="n">composer</span><span class="p">.</span><span class="nf">phar</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">composer</span></code></pre></figure>

<p>Проверяем:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">composer</span> <span class="o">-</span><span class="n">v</span></code></pre></figure>

<h2 id="Устанавливаем-flarum">Устанавливаем Flarum</h2>

<p>Если все сделано правильно, то вы смело можете приступать к установке flarum. Переходим в папку с сайтом:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">cd</span> <span class="sr">/var/</span><span class="n">www</span><span class="o">/</span><span class="err">имя</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="err">домен</span></code></pre></figure>

<p>Папка домена должна быть пуста. Вводим:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">composer</span> <span class="n">create</span><span class="o">-</span><span class="n">project</span> <span class="n">flarum</span><span class="o">/</span><span class="n">flarum</span> <span class="p">.</span> <span class="nf">-</span><span class="o">-</span><span class="n">stability</span><span class="o">=</span><span class="n">beta</span></code></pre></figure>

<p>Начнется установка flarum. После завершения установки откройте сайт в браузере и завершите установку flarum.</p>

<h2 id="Возникающие-ошибки">Возникающие ошибки</h2>

<div block="">
<p><b>Q</b>: Нет доступа к сайту, в логах ссылается на “Option Multiviews not allowed here”.</p>
<p><b>A</b>: Править /etc/httpd/conf.d/z1_home.conf, изменить значение параметра AllowOverride на All.</p>
<p><b>Q</b>: При установке flarum composer выдает ошибку: PHP Fatal error: Uncaught exception ‘ErrorException’ with message ’proc_open(): fork failed — Cannot allocate memory’ in phar</p>
<p><b>A</b>: Смотрите заметку на <a href="https://getcomposer.org/doc/articles/troubleshooting.md#proc-open-fork-failed-errors">getcomposer.org</a></p>
</div>

					</div>
				</div>
					
				<div class="actions">	
					<div class="tags">
						<span class="date"> 17 января 2016</span>

						
							<a href="/tag/%D0%93%D0%B0%D0%B9%D0%B4/" rel="tag">Гайд</a>, <a href="/tag/cms/" rel="tag">CMS</a>
							
					</div>
				</div>
			</div>
			
			<div class="common">
				<div class="comments wrapper">
	<div class="control">
		
			<button 
				
					id="show-comments" data-disqus-url="http://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/" data-disqus-identifier="/blog/ustanovka-flarum-na-centos-7"
				
					class="disqus-comment-count slider show-comments">
				
					Комментировать
				
			</button>
			<span class="hint">или</span>
		
		<button class="share-button social-toggle slider">Поделиться</button>
		<div class="social-networks">
			<div class="likely-share">
	<div class="likely">
		<div class="vkontakte"></div>
		<div class="telegram"></div>
		<div class="twitter"></div>
		<div class="facebook"></div>
		<div class="gplus"></div>
		<div class="linkedin"></div>
	</div>
</div>
		</div>
	</div>
	
		
			<div id="disqus_thread" class="frame"></div>
			<script type="text/javascript">		
				var disqus_shortname = 'milkleaks-ru',
				  disqus_url = 'http://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/',
				  disqus_identifier = '/blog/ustanovka-flarum-na-centos-7',
				  disqus_title = 'Установка flarum на centOS';

				function loadDisqusOnDemand() {
					var script = document.createElement('script');

					script.type = 'text/javascript';
					script.async = true;
					script.src = '//go.disqus.com/embed.js';

					(document.getElementsByTagName('head')[0]
					  || document.getElementsByTagName('body')[0]).appendChild(script);

					//hides the button and remove event listeners
					this.removeEventListener('click', loadDisqusOnDemand);
					this.style.display = 'none';
				}

				document
				  .getElementById('show-comments')
				  .addEventListener('click', loadDisqusOnDemand);
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
		
	
</div>
			</div>
		</article>
	</div>
</div>

<footer>
	<div class="common full">
		<div class="wrapper">
			<div class="copyright">
				Александра Травкина &copy; 2015 - 2017 <a target="_blank" href="/feed">RSS</a><br />
				Блог о компьютерных играх, фильмах, книгах, вебе и всем прочем.
			</div>
		</div>
		<div class="aside">
			
		</div>
	</div>
</footer>


		<script type="text/javascript" src="/assets/js/jquery.js"></script>
		<script type="text/javascript" src="/assets/js/jekyll-search.js"></script>
		<script type="text/javascript" src="/assets/js/lazyload.js"></script>
		<script type="text/javascript" src="/assets/js/likely.js"></script>
		<script type="text/javascript" src="/assets/js/fotorama.js"></script>
		<script type="text/javascript" src="/assets/js/lightbox.js"></script>
		<script type="text/javascript" src="/assets/js/readmore.js"></script>
		<script type="text/javascript" src="/assets/js/tocbot.js"></script>
		<script type="text/javascript" src="//milkleaks-ru.disqus.com/count.js" id="dsq-count-scr" async></script>
		<script type="text/javascript" src="/assets/js/main.js"></script>
		<script type="text/javascript" src="/assets/js/test.js"></script>
	</body>
</html>