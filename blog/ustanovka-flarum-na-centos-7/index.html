<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Установка flarum на centOS</title>

			<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="robots" content="index, follow" />
	
	<meta name="title" content="Установка flarum на centOS · Milkleaks" />
	<meta name="description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии,..."/>
	<meta name="keywords" content="Веб, Гайд, " />
	
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Milkleaks">	
	<meta property="og:title" content="Установка flarum на centOS · Milkleaks" />
	<meta property="og:description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии,..."/>
	<meta property="og:url" content="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/">
    <meta property="og:locale" content="ru">
	<meta property="og:image" content="" />
	<meta property="og:image:width" content="640">
	<meta property="og:image:height" content="360">
	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Установка flarum на centOS · Milkleaks">
	<meta name="twitter:description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии,...">
	<meta name="twitter:image:src" content="">
	<meta name="twitter:url" content="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/">
	<meta name="twitter:domain" content="https://milkleaks.ru">
	
	<meta name="yandex-verification" content="74c3b5c777ee0ba1" />
	<meta name="google-site-verification" content="jqmtruexSTI1O_HYicSlVMgM4nNh_Di_7zlyTbYlMc8" />
	
	<link rel="canonical" href="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/">
	<link rel="alternate" type="application/rss+xml" title="Milkleaks · Блог о компьютерных играх, фильмах, книгах, вебе и всем прочем." href="https://milkleaks.ru/feed.xml" />
		<script type="text/javascript">base_url = "https://milkleaks.ru";</script>
		
		<!--[ CSS ] -->
		<link rel="stylesheet" type="text/css" href="/assets/style-0af51498022c69498b8b61ae790a4b575473acda05a02c26e3443684d6b85c9e.css">

	</head>

	<body >
<nav class="common full">
	<div class="navigation wrapper">
		<div class="avatar">
			<a href="/">
				<div class="logo"></div>
			</a>
		</div>
	</div>
	<div class="search-base aside">
		<div class="frame">
			<div class="search">
				<div class="search-form">
					<input type="text" id="search-input" placeholder="Найти..." class="search-box" />
					<span class="search-button">
						<i class="fa fa-search open" aria-hidden="true"></i>
						<i class="fa fa-times close" aria-hidden="true"></i>
					</span>
				</div>
				<ul id="results-container" class="dropdown"></ul>
			</div>
		</div>
	</div>
</nav>

	<article class="content post single">
	<header class="common">
		<div class="wrapper">
			<h1 class="title">Установка flarum на&nbsp;cent<span class="caps">OS</span></h1>
			
		</div>
	</header>

	
	


	<div class="common">
		<div class="entry">
			
				<p>Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — <a href="http://flarum.org/" rel="nofollow" target="_blank">flarum</a>. Судя по тому, что уже есть, <span class="caps">CMS</span> довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии, захотелось поставить её на поддомен и посмотреть чуть более детально. Собственно говоря, в этой статье я описываю процесс установки flarum’a на cent<span class="caps">OS</span> 7.</p>

<p>Ставилась flarum на cent<span class="caps">OS</span> 7 самого обычного <a href="https://www.ihor.ru/vds" rel="nofollow" target="_blank"><span class="caps">VDS</span> хостинга</a>. Для установки требуется Apache (с mod_rewrite), Nginx и Lighttpd. <span class="caps">PHP</span> версии <span class="caps">5.5</span> и выше, My<span class="caps">SQL</span> <span class="caps">5.5</span> и конечно же <span class="caps">SSH</span> консоль, так как ставится flarum через Сomposer.</p>

<h2 id="обновляем-php">Обновляем <span class="caps">PHP</span>
</h2>

<p>Так как на сервере стоял <span class="caps">PHP</span> версии <span class="caps">5.4</span> нам придется его обновить. Открываем консоль и добавляем репозиторий:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">rpm <span class="nt">-Uvh</span> http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</code></pre></figure>

<p>После добавления репозитория на сервере появится папка /etc/yum.repos.d, переходим в папку и редактируем файл remi.repo. Ищем секцию:</p>

<figure class="highlight"><pre><code class="language-conf" data-lang="conf">[<span class="n">remi</span>-<span class="n">php56</span>]
<span class="n">name</span>=<span class="n">Les</span> <span class="n">RPM</span> <span class="n">de</span> <span class="n">remi</span> <span class="n">de</span> <span class="n">PHP</span> <span class="m">5</span>.<span class="m">6</span> <span class="n">pour</span> <span class="n">Enterprise</span> <span class="n">Linux</span> <span class="m">6</span> - $<span class="n">basearch</span>&amp;<span class="n">nbsp</span>
<span class="c">#baseurl=http://rpms.famillecollet.com/enterprise/6/php56/$basearch/
</span><span class="n">mirrorlist</span>=<span class="n">http</span>://<span class="n">rpms</span>.<span class="n">famillecollet</span>.<span class="n">com</span>/<span class="n">enterprise</span>/<span class="m">6</span>/<span class="n">php56</span>/<span class="n">mirror</span>
<span class="c">#WARNING: If you enable this repository, you must also enable "remi" 
</span><span class="n">enabled</span>=<span class="m">0</span> 
<span class="n">gpgcheck</span>=<span class="m">1</span> 
<span class="n">gpgkey</span>=<span class="n">file</span>:///<span class="n">etc</span>/<span class="n">pki</span>/<span class="n">rpm</span>-<span class="n">gpg</span>/<span class="n">RPM</span>-<span class="n">GPG</span>-<span class="n">KEY</span>-<span class="n">remi</span></code></pre></figure>

<p>И меняем параметр enabled=0 на enabled=1. Аналогично можно обновится с <span class="caps">PHP</span> версии <span class="caps">5.4</span> до <span class="caps">5.5</span> в соответствующей секции remi-php55.</p>

<p>Далее редактируем /etc/httpd/conf.d/phpmyadmin.conf. Находим строку с параметром php_admin_value open_basedir и добавляем :/usr/share/doc/. Должно получится следующее:</p>

<figure class="highlight"><pre><code class="language-conf" data-lang="conf"><span class="n">php_admin_value</span> <span class="n">open_basedir</span> <span class="s2">"/usr/share/phpMyAdmin/:/etc/phpMyAdmin/:/var/lib/phpMyAdmin/:/tmp/:/usr/share/php/:/var/lib/php/session/:/usr/share/doc/"</span></code></pre></figure>

<p>Делается это для того, что бы не возникло проблем при обновлении phpmyadmin.</p>

<p>Теперь в консоль можно ввести следующее:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">yum <span class="nb">install </span>php <span class="nt">-y</span></code></pre></figure>

<p>И <span class="caps">PHP</span> обновится до <span class="caps">5.6</span> версии, соответственно. Проверяем:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">php <span class="nt">-v</span></code></pre></figure>

<h2 id="обновляем-остальные-пакеты">Обновляем остальные пакеты</h2>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">уum update</code></pre></figure>

<h2 id="устанавливаем-lighttpd">Устанавливаем Lighttpd</h2>

<p>Ставим wget:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>yum <span class="nb">install </span>wget</code></pre></figure>

<p>Обновляем репозитории:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>rpm <span class="nt">--import</span> https://fedoraproject.org/static/0608B895.txt
<span class="nb">sudo </span>wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
<span class="nb">sudo </span>rpm <span class="nt">-ivh</span> epel-release-6-8.noarch.rpm</code></pre></figure>

<p>Устанавливаем lighttpd:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>yum <span class="nb">install </span>lighttpd</code></pre></figure>

<p>Прописываем автостарт:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>chkconfig <span class="nt">--levels</span> 235 lighttpd on</code></pre></figure>

<p>Запускаем и проверяем:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>service lighttpd start
<span class="nb">sudo </span>service lighttpd status</code></pre></figure>

<h2 id="устанавливаем-composer">Устанавливаем Composer</h2>

<p>Установка composer предельно проста:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">curl <span class="nt">-sS</span> https://getcomposer.org/installer | php
<span class="nb">mv </span>composer.phar /usr/local/bin/composer</code></pre></figure>

<p>Проверяем:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">composer <span class="nt">-v</span></code></pre></figure>

<h2 id="устанавливаем-flarum">Устанавливаем Flarum</h2>

<p>Если все сделано правильно, то вы смело можете приступать к установке flarum. Переходим в папку с сайтом:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /var/www/имя/data/www/домен</code></pre></figure>

<p>Папка домена должна быть пуста. Вводим:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">composer create-project flarum/flarum <span class="nb">.</span> <span class="nt">--stability</span><span class="o">=</span>beta</code></pre></figure>

<p>Начнется установка flarum. После завершения установки откройте сайт в браузере и завершите установку flarum.</p>

<h2 id="возникающие-ошибки">Возникающие ошибки</h2>

<div block="">
<p><b>Q</b>: Нет доступа к сайту, в логах ссылается на «Option Multiviews not allowed here».</p>
<p><b>A</b>: Править /etc/httpd/conf.d/z1_home.conf, изменить значение параметра AllowOverride на All.</p>
<p><b>Q</b>: При установке flarum composer выдает ошибку: <span class="caps">PHP</span> Fatal error: Uncaught exception ‘ErrorException’ with message ’proc_open(): fork failed — Cannot allocate memory’ in phar</p>
<p><b>A</b>: Смотрите заметку на <a href="https://getcomposer.org/doc/articles/troubleshooting.md#proc-open-fork-failed-errors" rel="nofollow" target="_blank">getcomposer.org</a></p>
</div>

			
		</div>
			
		<div class="actions">
			<span class="date">
				17 января 2016
			</span>
			
			
												
					<a href="/category/веб/" class="category">Веб</a>
				
			

			
				<span class="point">·</span>

				
				
					<a href="/tag/гайд/" class="tag">Гайд</a>
				
			

			<span class="share" title="Поделиться записью в соцсетях">
				<label class="link" for="fsociety-ustanovka-flarum-na-centos-7">Поделиться</label>
			</span>
		</div>
	</div>
	<div class="modal fsociety-ustanovka-flarum-na-centos-7">
	<input type="checkbox" class="modal-trigger" id="fsociety-ustanovka-flarum-na-centos-7">
	<label class="modal-overlay" for="fsociety-ustanovka-flarum-na-centos-7"></label>

	<div class="modal-container">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">
					Поделиться
				</h3>
			</div>
			<div class="card-body">
				<div class="card-content">
					<noindex>
					<p>Рассказать о записи «Установка flarum на centOS» в соцсетях:</p>
					<div class="likely ">
						
							<div data-url="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/" data-title="Установка flarum на centOS · Milkleaks" data-via="sasha_travkina" class="twitter">Twitter</div>
							<div data-url="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/" data-title="Установка flarum на centOS · Milkleaks" class="vkontakte">VK</div>
							<div data-url="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/" data-title="Установка flarum на centOS · Milkleaks" class="telegram">Telegram</div>
							<div data-url="https://milkleaks.ru/blog/ustanovka-flarum-na-centos-7/" data-title="Установка flarum на centOS · Milkleaks" class="facebook">Facebook</div>
						
					</div>
					<p>А еще можно подписаться на блог по <a href="/feed" target="_blank"><b>RSS</b></a>.</p>
					</noindex>
				</div>
			</div>
			<div class="card-footer">
				<label for="fsociety-ustanovka-flarum-na-centos-7" class="item action">
					Закрыть
				</label>
			</div>
		</div>		
	</div>
</div>
</article>

<div class="pagination common full">
	
		<a class="next" title="«Роскомнадзор» и обход блокировок" href="/blog/roskomnadzor-i-obhod-blokirovok/">Ранее</a>
	
	<span class="page_number ">Запись: 40 из 80</span>
	
		<a class="previous" title="Firewatch" href="/blog/firewatch/">Позднее</a>
	
</div>

<footer class="common full">
	<div class="copyright wrapper">
		<a href="/about">Александра Травкина</a> &copy; 2015 - 2018 · <a target="_blank" href="/feed"><b>RSS</b></a> · Электропочта <a href="mailto:hello@milkleaks.ru" target="_blank">hello@milkleaks.ru</a> или телеграм <a href="https://t.me/sashatravkina" target="_blank">@sashatravkina</a>.<br />
		Блог о <a href="/category/игры/">компьютерных играх</a>, <a href="/category/фильмы/">фильмах</a>, <a href="/category/книги/">книгах</a>, <a href="/category/веб/">вебе</a> и <a href="/category/заметки/">всем прочем</a>. А ещё есть <a href="/photo/">фото</a> и архив <a href="/dungeon/">старых</a> записей.<br />
		<a href="http://steambuy.com/partner/milkleaks" target="_blank">Здесь можно купить лицензионные игры со скидкой.</a>
	</div>

	<div class="scroll-to-top aside">
		<a><i class="fa fa-angle-up" aria-hidden="true"></i></a>
	</div>
</footer>
		<!--[ JS ]-->
		<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript" src="/assets/jquery-b50e3d0497f416ee5d7dbeefdbaa98723a2200a8c1428b006ebadda28284bcef.js"></script>
<script type="text/javascript" src="/assets/jekyll-search-7204433405551c7f3443e8466082062d37e6d3db2e5e1c8f124c1bc10fea2396.js"></script>
<script type="text/javascript" src="/assets/fotorama-aebfda04c47491f370486c38568e25aff265f4f95347a0e4abfe9c9f1353b39b.js"></script>
<script type="text/javascript" src="/assets/lightbox-38219f7d2b364b9f29051725c39509889e12bca6fba070e54066d5710f9ae46d.js"></script>
<script type="text/javascript" src="/assets/hyphenator-9030ad3748aef2e496294b0dc2d947f35c51403f8813d24e519fff8cccb28471.js"></script>
<script type="text/javascript" src="/assets/likely-780ace139e84bdd5df86e36fe18413907f96abaf433a7ec48a2acb3dea905c0e.js"></script>
<script type="text/javascript" src="/assets/tocbot-deafbb0615f0bca439dbb779dcfc6337cb76ef05c436ea9eb205029708496a67.js"></script>
<script type="text/javascript" src="/assets/post-e1622ae246c099cf1e081969d1ccc68a3a9d63fbfa188570c627204412e6b40a.js"></script>
<script type="text/javascript" src="/assets/base-8b50d1d7d26d2b32eae53d8388537b866d8111ec1645785de4da72f035074924.js"></script>
	
	</body>
</html>